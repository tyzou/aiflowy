# AIFlowy 更新记录

## v2.0.7 2026-01-30
- 新增：添加文件上传记录功能
- 新增：新增聊天思考过程显示功能
- 新增：聊天助手深度思考内容并返回前端
- 新增：添加 MCP 客户端在线状态显示与重启功能，优化 MCP 管理页面
- 修复：在拓扑排序中强制实施隐式父子依赖关系
- 修复：修正系统任务创建权限路径
- 修复：修复聊天助手配置可能存在的空指针问题
- 修复：修复 Rag.searcher.type 字段注入启动失败问题
- 优化：更新 thinking 组件样式（包括宽度、边距及完成时折叠）
- 优化：更新聊天气泡样式宽度
- 优化：优化工作流确认节点显示效果，改进加载动画
- 优化：更新聊天助手设置页深色模式样式
- 优化：更新子菜单底部边距样式
- 优化：在 ChatStreamListener的onFailure 方法中添加堆栈打印，便于排查SSE连接中断问题
- 优化：优化模型验证提示逻辑
- 优化：修复 MCP 服务启动失败时的异常处理
- 优化：升级 vue-element-plus-x 及相关依赖
- 优化：升级 agents-flex 版本
- 优化：升级 tinyflow-java 版本

## v2.0.6 2026-01-23
- 新增: 模型校验为向量模型时返回向量维度
- 新增: 知识库新增分类功能，支持向量模型维度动态配置
- 新增: 知识库检索支持动态配置最大召回数量和最小相似度
- 新增: 聊天功能支持自动切换至新建会话
- 新增: 基础功能模块新增修改密码按钮链接
- 新增: API模块新增密钥权限校验功能，并同步接口信息
- 优化: 聊天助手挂载MCP服务启动失败时，新增友好提示并添加重启MCP服务按钮
- 优化: 知识库支持内部配置功能
- 优化: CardList组件新增IconifyIcon图标支持
- 优化: MCP服务启动失败时新增提示，机器人默认仅查询已启动的MCP服务
- 优化: 优化聊天侧边栏展开动画效果
- 优化: 更新国际化文案内容
- 优化: 优化聊天AI消息状态展示样式
- 优化: 调整聊天气泡最大宽度样式，优化显示效果
- 优化: 更新加载页面文案内容

## v2.0.5 2026-01-16
- 新增：初始化公共模块并添加 API 密钥拦截器和工作流控制器
- 优化：调整文字省略显示的样式
- 优化：添加图标库用于本地使用
- 优化：更新滑动验证按钮样式和图像
- 优化：简化 Redis 容器配置
- 优化：更新 agents-flex 版本至 2.0.0-rc.3
- 优化：移除冗余的国际化翻译
- 优化：修改并保存 MCP 方法的返回值
- 重构：移除未使用的 BotApiKey
- 重构：移除 common 和 core 模块，更新目录结构文档
- 重构：更新全局加载页面
- 修复：修复删除知识库时的 bug
- 修复：修复知识库文档中删除和修改块向量的失败问题
- 修复：修复未配置重排模型 ID 时获取重排模型 ID 空指针的问题
- 修复：修复机器人挂载知识库时的 MCP bug
- 修复：修复本地文件上传 bug
- 修复：修复工作流标题最大宽度的 CSS 类问题
- 修复：修复 crypto.randomUUID 未找到的问题
- 修复：修复工作流无法选择插件的 bug
- 修复：修复 Markdown 渲染代码块 bug
- 修复：修复用户中心未挂载 MCP 及机器人挂载 MCP 但未检查工具的问题
- 修复：修复 Docker 部署权限、数据库初始化及跨平台上传路径兼容性问题
- 修复：修复 tb_bot_plugin 表字段 plugin_tool_id 更新后代码仍使用旧字段的问题
- 修复：验证聊天大模型关闭思考模式
- 修复：修复模型管理页面供应商类型无法保存的问题
- 修复：更新 ollama 默认不需要 apikey 的兼容处理
- 文档：移除未使用的文档
- 文档：添加前端文档
- 文档：重写自定义节点文档并更新工作流部分
- 文档：添加文件存储文档
- 文档：重写数据字典文档并添加详细代码示例
- 文档：行为验证码文档
- 文档：更新代码生成器文档
- 文档：修复开发文档路由配置
- 文档：更新并简化部署说明
- 文档：更新并统一 application.yml 和 yml 文件文档

## v2.0.4 2026-01-09
- 新增: 新增 MCP 功能
- 新增: 为 bots 模块添加多语言配置
- 新增: 更新岗位菜单图标并新增 SVG 图标，添加 OAuth 菜单并优化岗位管理菜单 UI
- 新增: 新增岗位管理功能模块
- 优化: 更新 tb_sys_menu 表排序值，调整样式（运行页面布局、文本溢出显示等）
- 优化: 更新 slogan 图片，移除 logo 自定义配置
- 优化: 清理未使用的脚本和工作空间，删除过期的岗位管理菜单 SQL 初始化脚本
- 优化: 更新依赖版本（agents-flex 多版本迭代、统一 netty 版本、升级 Java 至 17）
- 优化: 移除冗余编译配置，迁移至 jakarta 包并更新依赖至 Spring Boot 3
- 优化: 重构验证码模块（重命名包 / 模块、格式化代码），移除废弃 OAuth 配置及相关菜单映射
- 优化: 更新 Dockerfile，使用 eclipse-temurin 作为基础镜像，支持 macos arm64，适配 JDK 17 和 V2 版本
- 修复: 修正模型供应商删除验证逻辑，补充缺失异常处理并增加删除约束校验
- 修复: 修正 Bot 删除接口路径，修复知识库重排模型 bug
- 修复: 修复 Bot 相关问题（微信公众号发布异常、用户反馈查询无权限）
- 修复: 修复复选框显示不清晰、岗位管理国际化显示异常问题
- 修复: 修复 Bot 删除失败问题，删除大模型之前供应商先删除所有关联模型
- 修复: 限制仅状态为 0 的定时任务可执行启动操作，更新 netty 依赖版本
- 修复: 修正登出 API 请求中使用的客户端实例
- 文档: 更新 README 文档，补充新增功能、路线图、岗位功能及技术栈相关内容
- 文档: 调整快速入门文档目录结构，更新联系人组引用及快速入门指南


## v2.0.3 2025-12-31
- 新增：新增 OkHttpUtil
- 新增：新增用户反馈模块，包含反馈提交、列表查看与详情页功能
- 新增：实现第三方 OAuth 登录，支持微信和钉钉，并添加相关角色配置
- 新增：新增系统外观配置页面
- 新增：新增公共 API 以检索 UI 配置，并将默认 UI 配置添加到系统选项
- 新增：为聊天对话和助手列表中的条目添加标题属性
- 新增：在管理后台和用户中心应用中添加 Analytics 跟踪脚本
- 优化：更新多个模块的样式，包括登录页、工作流标题溢出处理及其他页面样式调整
- 优化：更新中文国际化文件，涉及菜单、认证页面、模型项及 API 密钥标签等
- 优化：优化代码，包括模型弹窗非必填字段的显示方式、文件存储模块、聊天协议及设置页面
- 优化：移除系统中未使用的 SnowFlakeIDKeyGenerator 实例化代码
- 优化：更新前端依赖库 agents-flex 的版本至 beta.6
- 优化：修复中文 README 文档中的 Markdown 格式问题
- 优化：重构文件存储模块
- 修复：修复插件更新出错的问题
- 修复：修复 resource 查询接口，限制其仅能查询当前用户的数据
- 修复：修复系统日志列表在未记录用户信息时可能报错的问题
- 修复：修复机器人调用知识库、插件和工作流时存在的缺陷
- 修复：更新数据库 SQL 脚本
- 文档：更新 README 文档，增加用户中心功能截图和增强的平台描述
- 文档：更新认证相关文档及页面的中文本地化内容


## v2.0.2 2025-12-26
- 新增：更新列表、网格和折叠图标
- 新增：为大模型功能增加标签能力
- 新增：新增 AIFlowy 聊天协议规范与实现
- 新增：新增数据库表 tb_resource_category，用于资源分类
- 新增：在登录流程中集成 TAC 图形验证码
- 新增：新增资源分类管理功能并集成到系统中
- 新增：为 BotModel 实体添加选项检索方法
- 新增：更新任务模块的代码生成配置
- 新增：在项目中新增代码生成模块
- 新增：移除 iframe 嵌入令牌功能
- 新增：更新聊天组件的属性和内部逻辑
- 新增：新增 FileUtil、IdUtil、SSEUtil 等工具类
- 新增：为 AI 模块增加对默认重排序模型和供应商配置的支持
- 优化：更新 tinyflow-java 依赖至 beta.6 版本
- 优化：将协议名称从 aiflowy-chat-sse 更新为 aiflowy-chat
- 优化：更新助手市场详情页的路由模式
- 优化：替换菜单中的图标
- 优化：优化插件必填参数和知识库导入逻辑
- 优化：移除路由配置中重复的路由项
- 优化：清理知识库和插件相关的控制台警告
- 优化：优化知识库相关代码
- 优化：移除未使用的 common-util 模块依赖
- 优化：对多个界面（UI、登录页、菜单）进行样式、图标、布局和文案的调整
- 修复：修复可能存在的空指针异常问题
- 修复：修正中文欢迎信息的空格问题
- 修复：更新 AI 实体时间戳，并重构对话初始化逻辑
- 修复：修正 BotApiKeyServiceImpl 中 botId 的类型转换错误
- 修复：恢复 ChainEventListenerForSave 中递归查找祖先状态的功能
- 修复：修复添加大模型后，编辑并更改供应商名称会报错的问题
- 修复：修复大模型终端点设置不正确的问题
- 修复：修复文档集合相关的问题
- 修复：修复工作流相关的问题
- 修复：修复插件相关的问题
- 修复：修复机器人、模型、聊天相关的问题
- 文档：在导航菜单中新增公司新闻链接
- 优化：Knowledge.vue 更名为 DocumentCollection.vue
- 优化：llm.vue 更名为 Model.vue
- 优化：将 Sender、BubbleList 和 Conversations 注册为全局组件
- 优化：更新数据中心标签页的切换行为和标签文本
- 优化：移除 RagRerankModelUtil 类，并将其移至 utils 包
- 优化：重组 AI 监听器包，并移除未使用的工具类
- 优化：将工具和记忆实体移动到 agentsflex 包中
- 优化：将 ai 前缀的 API 端点重命名为 core 资源路径
- 优化：重命名 AI 控制器以保持命名一致性
- 优化：重组并增强数据库表结构的定义
- 优化：将 BotBase 实体中的 llm 字段重命名为 model
- 优化：更新模型和供应商实体结构
- 优化：更新实体基类，增加公共字段和类型修改
- 优化：将 TinyFlowConfigService 移动到 service 包
- 优化：在系统服务中用类型化 Mapper 替换原始 SQL 操作
- 优化：将聊天模块中的 sessionId 统一重命名为 conversationId
- 优化：更新菜单顺序，并将 “bots” 重命名为 “workflow”
- 优化：统一并优化数据库 Schema 类型和命名规范
- 优化：生成新的基础实体
- 优化：更新 AI 实体基类，增加类型处理器和字段变更
- 优化：新增数据库变更文档 v2_db_changes.md
- 优化：将代码生成拆分为独立的模块类
- 优化：将 BotApiKeyMapperMapper 重命名为 BotApiKeyMapper
- 优化：重命名数据中心表的字段、实体和服务类
- 优化：更新 API 端点以使用新的命名规范
- 优化：移除旧数据库表并更新 LLM 模型 Schema
- 优化：重命名系统控制器以获得更清晰的命名
- 优化：重命名 API Key 资源权限相关实体和服务
- 优化：移除聊天消息主题和插件的基础实体类
- 优化：重命名数据表和实体，移除 ai 前缀并更新命名约定
- 优化：重命名 AI 控制器类以移除冗余前缀
- 优化：重命名 AI 服务类以移除冗余的 Ai 前缀
- 优化：重命名 Mapper 接口以遵循一致的命名约定
- 优化：移除第三方消息处理组件
- 优化：移除 OpenAI 请求/响应实体和平台枚举
- 优化：重命名模型名称
- 优化：将表 tb_bot_knowledge 重命名为 tb_bot_document_collection
- 优化：将表 tb_workflow_record_step 重命名为 tb_workflow_exec_step
- 优化：将工作流执行结果表重命名为 tb_workflow_exec_result
- 优化：重命名 API Key 资源关系表
- 优化：重命名 API Key 资源权限表和关系
- 优化：将知识库表重命名为 document_collection
- 优化：将插件分类关系表重命名为映射表
- 优化：将对话消息表重命名为 conversation
- 优化：重命名 AI 相关数据表和列名为通用名称
- 优化：移除外部消息标识并更新聊天组件逻辑，简化代码
- 优化：用 IdUtil 替换 UUIDGenerator 来生成令牌
- 优化：替换已弃用的文件提取逻辑
- 优化：用 SSEUtil 替换 ChatManager 来处理 SSE 响应
- 优化：重组 AI 模块包结构，移除未使用的类
- 优化：移除未使用的前端配置和工具类
- 优化：将消息解析逻辑移至 AiBotMessage 实体
- 优化：移除未使用的 AI 控制器文件
- 优化：移除未使用的 AI 实体和服务类


## v2.0.1 2025-12-19
- 新增：用户中心对话编辑和删除。
- 新增：新增用户中心主页聊天、助手市场聊天、用户中心机器人聊天功能。
- 新增：新增保存聊天消息到数据库、设置提示词为会话标题的功能。
- 新增：为 Bot 添加深度思考开关。
- 新增：新增最近使用的 AI 助手列表管理功能。
- 新增：更新 AI 工作流和 Bot 模态框的状态显示逻辑。
- 新增：新增 Bot 分类及最近使用实体，并支持完整 CRUD 操作。
- 新增：新增 AI 工作流执行记录和步骤追踪页面。
- 新增：新增工作流执行记录与步骤。
- 新增：提取 TinyFlowService 中获取 chain 状态的方法。
- 新增：重构 LLM 模块。
- 新增：实现用户中心资源列表、工作流列表与执行页面。
- 新增：新增用户中心 AI 助手市场和聊天机器人管理功能。
- 新增：新增用户中心退出、个人资料信息更新功能。
- 新增：新增执行记录列表、详情页。
- 新增：初始化 AIFlowy webSDK 项目。
- 新增：为 PageSide 组件添加图片支持。
- 新增：为聊天助手添加默认头像。
- 新增：新增验证码 API。
- 新增：新增工作流任务（job）功能。
- 优化：调整 AI 设置面板布局、表格操作栏、内容容器边框、侧边栏最大高度等 UI 样式。
- 优化：更新菜单图标，优化主题相关 UI 和发送图标。
- 优化：清理无用导入和组件 props 默认值，移除非必要的 defineExpose、defineEmits 导入。
- 优化：更新 agents-flex、tinyflow-java 依赖版本。
- 优化：更新项目配置和版权信息。
- 优化：更新 LLM 选择选项和相关代码，更新 SQL 文件。
- 优化：添加并优化 PageSide 组件，调整侧边栏默认选中状态。
- 优化：展示字典标签。
- 修复：修复 getChatModel 方法中的 modelId 处理。
- 修复：修复聊天相关的小问题。
- 修复：修复 Bot 配置中的可选链问题。
- 修复：修复自定义节点。
- 修复：修复 pom.xml 中依赖排除问题。
- 修复：修复下载节点功能。
- 修复：修复新增字段的添加。
- 修复：修复用户中心中状态字段的过滤与重命名以正确显示。
- 修复：修复依赖问题。
- 文档：更新 UI 管理模块的安装说明。
- 文档：更新 AI 插件开发文档中的标点符号。
- 文档：更新 README 文件结构，增加中文 README。
- 文档：更新导航栏和侧边栏链接。
- 文档：将 README 横幅图片更新为英文版。


## v1.1.7 2025-11-05
**开源版：**
- 新增：插件支持 File 上传
- 新增：优化 sse hooks
- 新增：优化 RequestUtil 添加对 ContentCachingRequestWrapper 的处理
- 新增：新增 Log reporter 模块，方便在开发过程中进行调试和排查问题
- 新增：bot 思维链消息标识抽取为枚举
- 新增：修改 Dockerfile 以设置文件所有权
- 新增：更新环境配置并调整 Docker Compose 设置
- 优化：更新最新 sql
- 优化：点击新增大模型无反应 bug
- 优化：优化文件上传存储地址
- 优化：升级 mybatis-flex,agents-flex,tinyflow-java 到最新版本
- 优化：优化静态资源缓存策略
- 修复：插件增加英文名称字段，解决大模型调用 name 字段调用不到 function 问题
- 修复：修改输入参数保存导致传入方法为空问题
- 修复：补充思维链枚举调用遗漏的地方
- 修复：优化语音缓存的细节问题


## v1.1.6 2025-08-22
**开源版：**
- 新增：添加 Docker 和 Nginx 配置以支持前后端容器化部署
- 优化：优化 hooks 调用逻辑
- 修复：修复新增/编辑用户的表单校验问题

**商业版：**
- 新增：新增通用字段
- 新增：去掉字段
- 优化：修复 hooks 调用逻辑
- 修复：移除多余表
- 修复：解决一些页面的控制台警告
- 修复：修复 QA 知识库 ID 为空的问题
- 修复：修复新增/编辑用户的表单校验问题
- 修复：补全实体类缺失字段
- 修复：默认跳转 bot 页
- 修复：sql 相关问题
- 修复：修改配置文件


## v1.1.5 2025-08-13
**开源版：**
- 新增：升级agents-flex、tinyflow到最新版，确认节点参数重构，工作流结果渲染，工作流参数渲染
- 新增：设置别名字段为非必填
- 新增：新增工作流子节点，复制工作流
- 优化：优化登录按钮加载状态
- 修复：兼容旧版 tinyflow
- 修复：因提示词中有英文引号导致的JSON错误的修复方式
- 修复：解决因提示词中存在英文引号导致概率性JSON解析报错的问题
- 修复：执行结果展示BUG
- 修复：动态表单组件BUG
- 修复：修复使用兼容openai的聊天接口时，流式调用工具上下文丢失的问题
- 修复：修复别名字段为空字符串时，会导致唯一索引冲突的问题

**商业版：**
- 新增：工作流结果渲染，工作流参数渲染
- 新增：运行结果渲染
- 新增：升级tinyflow，agentsflex，tinyflowjava到最新版，重构确认节点的参数
- 新增：更新sql
- 新增：新增工作流子节点，复制工作流
- 新增：选择工作流组件增加remove属性
- 优化：优化登录按钮加载状态
- 优化：注释大模型渲染图表功能
- 优化：优化配置
- 修复：兼容旧版tinyflow
- 修复：解决因提示词中有英文引号导致的概率性JSON报错问题
- 修复：执行结果展示BUG
- 修复：动态表单组件BUG，编辑用户不生效问题
- 修复：修复模型供应商json配置问题
- 修复：修复使用兼容openai的聊天接口时，流式调用工具上下文丢失的问题
- 修复：修复别名字段为空字符串时，会导致唯一索引冲突的问题
- 修复：bot、知识库、工作流别名设置为非必填字段
- 修复：新增/编辑 bot、工作流、知识库时，判断别名是否冲突并提示，更新sql

## v1.1.4 2025-08-06

**开源版：**
- 新增：系统智能助手功能，调整 bot 设置页面部分开关位置，调整系统大模型配置
- 新增：取消隐藏添加大模型时，方法调用开关
- 新增：数据节点优化
- 修复：修复工作流开始节点 入参选择 Array类型 后台结果 仍然是 String类型 close #ICPVPD
- 修复：修复 react 控制台警告
- 修复：工作流 resume 时设置用户信息
- 修复：修复 Ctrl + s 保存报错的问题 close #ICQ3P5
- 优化：优化节点执行错误后的判断逻辑
- 文档：价格文档

**商业版：**
- 新增：更新前端默认配置
- 新增：bot 在非 ReAct 模式下，支持语音播报和思维链
- 新增：取消隐藏添加大模型时，方法调用开关
- 修复：修复工作流新增时没有别名输入框的问题
- 修复：修复 bot ReAct 模式状态显示不正确问题
- 修复：修复导入工作流时因没有别名导致的报错问题
- 修复：修复 icon 的 react 控制台警告
- 修复：修复工作流ctrl + s保存报错
- 修复：修复 useCheckPermission 可能出现 undefined 的问题
- 优化：优化 AdminPermissionDialect.java
- 优化：优化节点执行错误后的处理逻辑


## v1.1.3 2025-07-30
- 新增：Bot 支持切换 ReAct 模式/普通模式，并在设置页面提供开关，普通模式暂不支持语音播报和思维链。
- 新增：Bot 设置别名访问，包括 Bot 外部访问、设置页面、接口访问等支持通过别名操作。
- 新增：工作流、插件、知识库等模块统一支持别名访问与配置，提升可维护性与可读性。
- 新增：一键添加大模型功能，简化配置流程。
- 新增：Bot 设置微信公众号配置发布功能，支持微信接入能力配置。
- 新增：Bot 创建时需输入别名，增强可识别性。
- 新增：数据中枢模块及批量导入功能，支持集中化数据管理。
- 新增：第三方消息处理接口及微信公众号实现类，完善公众号接入。
- 新增：后端接口支持通过别名或 ID 查询知识库和工作流详情。
- 新增：新增保存/查询节点相关文档说明。
- 新增：新增 `Dockerfile`，支持镜像构建与部署。
- 修复：修复 ReAct 模式下由于默认携带历史消息过少导致回复不相关的问题，新增 Bot 默认历史消息数为 10。
- 修复：大模型为非多模态时刷新页面导致消息渲染错乱的问题。
- 修复：删除绑定 Bot 的大模型后访问报错的问题。
- 修复：进入 Bot 设置页面插件查询时 BotId 为空异常。
- 修复：Ollama 与星火模型因消息列表渲染逻辑修改导致不可用的问题。
- 修复：content 字段可能为 null 的问题。
- 修复：登录状态判断不准确的问题。
- 修复：欢迎语设置需手动保存的问题。
- 修复：选择 Ollama 时缺少“对话模型”开关的问题。
- 修复：星火大模型配置校验问题。
- 修复：本地开发环境 `.env.development` 中地址配置错误。
- 修复：Vite proxy 配置错误，解决代理接口请求失败问题。
- 优化：将 ReAct 聊天逻辑抽取为独立方法，提高代码复用与可维护性。
- 优化：微信公众号消息接口配置方式，提升配置灵活度。
- 优化：插件界面 UI 细节，改善用户体验。
- 优化：左侧菜单项“大模型”更名为“模型管理”。
- 优化：更新 `snakeyaml` 依赖版本，防止 YAML 注入风险。


## v1.1.2 2025-07-23
- 新增：星火使用兼容 openAi 的接入方式
- 新增：调整星火大模型配置表单项，bot设置调整携带历史消息数量为10-100条
- 新增：兼容 openAi 聊天借口基本调用实现
- 新增：工作流添加到定时任务
- 新增：新增/删除 bot的apiKey
- 新增：新增 AiBotApiKey 相关controller、service、mapper、entity,修复调用Action后不会complete emitter的问题
- 新增：新增 cron 表达式最近五次运行时间
- 新增：新增 cron 表达式生成组件
- 新增：新增 bot apiKey 表 sql
- 新增：新增确认节点类型渲染
- 新增：聊天、向量化、重排大模型配置校验功能
- 新增：配置文件优雅停机 http压缩
- 新增：新增重排路径配置
- 新增：新增工作流运行页面，返回每步执行情况
- 新增：重构大模型供应商配置文件，添加预设大模型配置，AiLlm的llmExtraConfig改为Map类型
- 修复：修复默认图标路径
- 修复：修复上下文丢失问题
- 修复：升级 AF 到最新版本，修复工作流异步节点执行判断的问题
- 修复：兼容openAi的chat接口补充function calling 逻辑
- 修复：修复bot界面可能出现的从undefined上读取属性的问题，添加默认ws地址配置，见.env
- 修复：修复阿里云数据库返回数据无content问题
- 修复：application.yml新增默认apiKey密钥
- 修复：修复连接webSocket时外部聊天sessionId为undefined的问题
- 修复：调整配置大模型表单项的显示/隐藏
- 修复：升级 AF 和 TinyFlow 到最新版本以修复序列化的问题
- 修复：修正百度千帆想化路径配置错误
- 修复：修复ollama模型无法对话问题，新增对话/多模态模型配置验证
- 修复：修复读取不到配置的bug
- 修复：优化AiLlm读取配置时可能出现的空指针
- 修复：解决大模型新增/编辑弹窗的一些问题
- 修复：修复知识库上传时，点击下一步过快导致上传未完成，返回文件路径为空 close #ICMO1F
- 修复：向量化支持和聊天、多模态支持互斥
- 修复：恢复llmExtraConfig为Properties，使用options兼容
- 修复：前端llm配置字段改为使用options字段，兼容旧版
- 修复：优化音频接口可能出现的空指针
- 修复：修复图片消息不渲染问题
- 修复：修复大模型添加后编辑的回显问题，修复模型名称切换为手动输入时，模型能力开关无法显示问题
- 修复：解决大模型页面回显问题
- 优化：升级 TinyFlow 到最新版本
- 优化：确认节点，调整选中的样式
- 优化：移除非必要的 System.out 输出
- 优化：工作流执行代码优化
- 优化：优化确认节点的判断逻辑
- 优化：优化页面加载布局错乱问题
- 优化：优化bot前端页面
- 文档：动态代码节点文档更新，_result 设置值需要遵循对应的语法

## v1.1.1 2025-07-16
- 新增：用户确认节点
- 新增：新增从缓存中取音频数据接口
- 新增：bot聊天新增语音播报暂停/播放按钮
- 新增：bot聊天接口实现文本转语音并通过 websocket 发送到前端
- 新增：接入火山引擎文字转语音
- 优化：优化bot页面
- 优化：升级 agents-flex 和 TinyFlow 到最新版本
- 优化：优化知识库页面
- 优化：增加搜索框隐藏功能， 统一table风格
- 修复：修复知识库不能选择模型问题
- 修复：优化语音播报吞字问题
- 修复：修复bot聊天语音播报播放/暂停按钮的状态问题
- 修复：解决bot聊天语音播报卡顿的问题
- 修复：修复菜单栏收起不显示菜单文字问题
- 文档：动态代码节点内置对象 _result 的说明

## v1.1.0 2025-07-09
- 新增：bot 支持一次发送多张图片，并根据大模型配置决定是否支持多模态上传
- 新增：外部聊天支持多模态
- 新增：bot 增加语音输入功能
- 新增：bot 聊天支持上传组件
- 新增：素材库增删改查页面及同步节点功能，支持同步网络资源到本地
- 新增：素材库图标样式及素材页卡片列表样式优化
- 新增：权限系统支持按钮级别的权限控制与菜单配置，新增 usePermissions hook 和权限注解
- 新增：知识库、插件、大模型的权限控制
- 优化：插件页面支持单个输入框关键内容查询
- 优化：插件、卡片、Bot 等页面 UI 与交互细节
- 优化：卡片列表下的操作按钮布局，超出三个时显示在“更多操作”中
- 优化：卡片布局操作按钮从面包屑移至搜索框旁，支持多关键字模糊查询
- 优化：删除无用代码，调整默认图标和分页逻辑
- 修复：删除工作流、知识库、插件时，若关联 bot 会提示先取消关联
- 修复：Bot 设置页清空大模型下拉框时报错
- 修复：CrudPage 的 options 字段无法保存的问题
- 文档：更新权限控制文档、素材同步节点文档与示例

## v1.0.9 2025-07-02
- 新增：bot 增加思维链，优化对话输出
- 新增：适配最新的 TinyFlow，支持 TinyFlow 的文件存储
- 新增：简化 BaseNodeParser 的代码逻辑，同时修复单节点解析时，可能出现某些基础数据无法解析的问题
- 新增：升级 TinyFlow 以及 AF 到最新版本，以支持节点的循环执行配置
- 优化：升级 AF 到最新版本
- 优化：优化卡片列表 UI
- 优化：优化登录页面 UI
- 优化：优化知识库导入 UI
- 修复：TinyFlow 当选中输入框或下拉框内容后，拖选中的内容，会多又一个莫名其妙的节点，造成无法运行
- 修复：修复工作流编辑器显示问题
- 文档：更新首页说明文档
- 文档：更新节点上下文部分的文档
- 文档：节点循环执行文档

## v1.0.8 2025-06-25
- 新增：使用大模型对用户提问优化标题
- 新增：bot采用ReAct模式，更新UI消息列表渲染，大模型响应完成时直接渲染所有内容
- 新增：新增知识库和工作流英文名称
- 修复：搜索组件重置表单失败问题
- 修复：外部聊天带token时，消息渲染错乱的bug
- 优化：知识库查询使用异步查询，提高检索效率
- 优化：sse 增加 event 事件监听
- 优化：优化知识库和工作流使用 deepSeek 调用 function_call 的时候使用英文名称，其他默认传中文名称作文函数调用，优化知识库分段大小，更好的从知识库检索回答


## v1.0.7 2025-06-18
- 新增：知识库支持搜索引擎功能（初步集成 ElasticSearch 召回机制，待后续完善）
- 修复：deepseek-chat 模型挂载知识库参数名大小写问题
- 修复：插件 Object 类型未正确传参的问题
- 修复：聊天默认参数未正确生效的问题（close #ICEOHU）
- 修复：bot 中使用 deepseek-chat 模型添加知识库/插件时报错问题（close #ICD9JQ, #ICDD4J）
- 优化：多处代码结构及逻辑优化，提升系统稳定性
- 优化：更新 `.gitignore` 文件配置
- 升级：Agents-Flex 至支持 Rerank 和 ReAct 的最新版本
- 升级：同步 TinyFlow 到最新版本
- 其他：回滚部分历史提交，修复兼容性问题
- 数据库：更新相关 SQL 脚本


## v1.0.6 2025-06-11
- 新增：bot 设计页面，新增显示工作流、知识库、插件、问题预设的绑定数量
- 优化：优化知识库 Ui 界面
- 优化：美化整体卡片布局
- 优化：优化知识库代码
- 优化：升级 Agents-Flex 依赖到最新版本
- 优化：重构本地存储逻辑，返回 url 全路径
- 优化：重构知识库导入接口
- 优化：优化插件试运行功能文档，大模型增加快捷配置参考地址
- 优化：优化知识库和大模型必填字段
- 优化：优化插件 UI 页面
- 修复：使用 FlexIDKeyGenerator 生成主键 id
- 修复：删除使用默认集合名称
- 修复：修复知识库导入到向量数据库未成功，但是文档已经保存问题
- 修复：openSearch 向量数据库使用默认集合，用户填了集合名称没有使用 Bug
- 修复：解决 jdk21 maven 构建报错
- 修复：修复编辑用户信息会更改密码的问题
- 修复：升级 AF 到最新版本以修复 RAG 知识库的 score 显示不正确的问题
- 修复：修复错误请求路径
- 修复：修复修改欢迎语时，如果值为空，显示默认值
- 修复：修复绑定插件时，面板状态和弹窗状态不统一的 bug
- 修复：更改 quartz 相关表名为大写，防止数据库未设置忽略大小写报错
- 修复：修复 bot 设计页面，问题预设弹框点击右上角关闭按钮无效 bug
- 修复：修复文件生成节点无默认值的问题
- 修复：修复外部连接bot聊天时，会话列表更新问题
- 文档：优化阿里云向量数据库存储文档，详细版本
- 文档：更新快速开始文档
- 文档：更新部署文档


## v1.0.5 2025-06-04
- 新增：插件新增 试运行 功能
- 新增：工作流增加自定义图标功能
- 新增：iframe 匿名访问功能，会话消息记录通过 redis 进行缓存
- 新增：bot 设计页面新增插件、工作流、知识库未绑定时折叠面板展开的文字提示
- 新增：修复 node 的状态在执行时未自动变化的问题
- 新增：为 ChainStartEvent 和 ChainResumeEvent 添加获取初始化参数的功能
- 新增：优化 JsExecNode 在每次执行脚本时新建一个独立 Context
- 优化：升级 AF 到最新版本，以修复在 Code 节点中，无法通过 . 读取 map 内容的问题
- 优化：优化登录页面
- 优化：优化 UI 细节
- 优化：优化 Event 的 toString
- 修复：修复使用 qwen-plus 调用 function_call 没有正确拼接大模型返回的参数问题
- 修复：修复S3存储，知识库上传文件后报错 close #ICAUI2
- 修复：修复 deepSeek-chat 大模型调用 function_call 提交参数类型前缀必须小写问题
- 修复：修复 deepSeekchat 大模型调用 function_call 类转换失败问题 close #ICBGBX
- 修复：修复使用 qwen-plus 调用function_call 没有正确拼接大模型返回的参数问题
- 修复：function call 消息存入数据库
- 修复：bot 设计页面，插件、工作流、知识库弹窗支持分页
- 修复：外部链接匿名访问bot，会话增删改查，外部聊天记录清除
- 修复：升级 agents-flex ，解决 milvus 向量化维度不一致问题
- 修复：修复 es 知识库无法检索问题
- 修复：更新 TinyFlow 并修复 close #ICBOOD
- 修复：修复插件使用 apiKey 进行认证，headers 中的参数未正确添加到请求头问题， 修复修改插件未 提交 tokenValue 问题
- 修复：修复 js 中无法通过 "." 调用 map 数据的问题
- 修复：解决外部打开聊天时，bot预设的问题、欢迎语失效的问题 close #ICCHE6
- 修复：优化大模型调用报错时的提示信息
- 修复：解决外部打开聊天时，无法触发function calling的bug


## v1.0.4 2025-05-28
- 新增：新增 sysToken 菜单插入语句
- 新增：Bot 应用增加问题预设功能，聊天组件支持快捷提示词
- 新增：iframe 匿名用户访问功能，新增 iframe 访问外部地址鉴权功能 close #IC7TT5
- 新增：iframe 鉴权接口，前端拼接 token 并存入 localStorage 进行鉴权
- 新增：新增插件分类功能，插件可归属一个或多个分类
- 新增：插件分类支持修改与删除
- 新增：新增单节点执行功能 close #IC7QJU
- 新增：工作流试运行时支持显示每一步执行结果 close #IC7KLQ
- 新增：知识库导入支持 PPT、PPTX 文件 close #IC6IOY
- 新增：新增 DeepSeek 品牌
- 新增：新增插件分类接口
- 新增：新增 SQL 查询节点功能 close #IC7ZET
- 优化：统一数据库表前缀
- 优化：优化 bot 使用大模型但不支持 function_calling 的报错提示 close #IC73F6
- 优化：Bot 下 API 功能增加使用说明地址
- 优化：优化节点单独运行时查找 dataType 的代码
- 优化：升级 AF（Agents-Flex）至最新版本，支持流式对话与 NodeErrorListener 配置
- 优化：优化知识库页面布局，右侧内容自动填满剩余宽度
- 优化：优化日志配置并启用 Spring Boot 日志 close #IC8BU9
- 修复：修复本地 ES 上传小文档超时报错后导入按钮失效的问题 close #ICA6WM
- 修复：修复可能的 NPE 问题
- 修复：修复 bot 对话共享上下文问题
- 修复：插件未将 key 加入参数中导致 API 鉴权失败 close #IC9SQH
- 修复：后台 AI 助手配置错误时聊天提示异常，修复 OpenAI 配置问题 close #IC9L0Q
- 修复：相似度检索测试结果不准确问题 close #IC9FQM
- 文档：新增 iframe 匿名用户访问文档
- 文档：更新自定义节点文档
- 文档：更新外部调用工作流文档
- 文档：新增默认存储方式配置说明
- 文档：更新文件管理文档
- 文档：新增定时任务文档
- 文档：更新默认用户名密码说明
- 文档：更新向量数据库文档
- 文档：更新大模型配置文档
- 文档：整理工作流文档图示
- 文档：新增 SQL 查询节点文档
- 文档：新增插件分类功能文档


## v1.0.3 2025-05-21
- 新增：新增 quartz 定时任务。 close #IC7HPZ
- 新增：用户滑动聊天窗口后，不再自动滚到底部
- 新增：增加智能体调试对话预览上下文清除的功能 close #IC7SMS
- 新增：插件输入参数和输出参数支持子节点
- 新增：AccordionItem 增加 icon 属性。
- 优化：修复登录页面加载抖动, 优化登录页面
- 优化：优化插件传参 argsMap值 < 参数默认值
- 优化：优化插件代码,支持 path 参数 close #IC8L3I
- 优化：升级 Tinyflow 和 Agents-flex 到最新版本
- 优化：优化 pom 版本构建
- 修复：修复 Bot 挂载插件，知识库，工作流之后等待时间过长问题，命中function call或者没有命中都使用 stream 返回，提高用户使用体验
- 修复：修复工作流页面初始化会请求导入工作流接口的问题。
- 修复：修复 apiKey 新增成功后列表没有自动刷新 close: #IC8C9I
- 修复：修复可能的 NPE 问题
- 修复：修复系统提示词未填空指针问题
- 修复：修复插件为空sql报错问题
- 文档：apiKey文档
- 文档：系统设置文档
- 文档：角色管理、apiKey文档
- 文档：动态代码节点文档。
- 文档：本地模型文档
- 文档：配置阿里云数据库文档
- 文档：bot挂载工作流文档
- 文档：模型管理文档
- 文档：bot挂载知识库文档
- 文档：工作流知识库节点、Http 节点文档，修复产品文档 next page 显示错误的问题。
- 文档：bot挂载插件文档
- 文档：优化工作流部分文档图片内容。
- 文档：优化文档代码格式
- 文档：更新Bot产品文档
- 文档：更新工作流文件生成节点文档。
- 文档：更新工作流插件节点文档。
- 文档：工作流节点上下文的文档。
- 文档：更新知识库产品文档
- 文档：工作流执行条件文档。
- 文档：工作流快速开始文档。
- 文档：完善插件模块的文档。


## v1.0.2 2025-05-15
- 新增：知识库增加excel文件导入 close #IC6IY6
- 新增：工作流独立访问页面 close #IC63FS
- 新增：工作流可通过API接口调用 close #IC3FNT
- 新增：升级 Tinyflow、Agents-Flex 等到最新版本
- 新增：工作流新增插件节点 close #IC5XEM close #IC3FO4
- 优化：统一【Bot】 和 【workflow】 的插件选择弹出框 close #212911
- 优化：知识库上传文件成功后就不能再选向量模型进行配置
- 优化：导出工作流改为从后端取数据
- 优化：当系统提示词没设置时，设置一个默认的系统提示词
- 优化：插件工具名称增加校验,知识库增加自定义向量模型进行向量化 close #IC6WAY
- 优化：知识库成功存入向量数据之后不允许再修改向量模型
- 修复：修复机器人删除对话记录后报botid不能为空 close #IC78K1
- 修复：解决执行加入大模型按钮后不会变成已加入大模型
- 修复：修复OpenAi的llmExtraConfig空指针问题 close #IC72VG
- 修复：修复新建空白工作流时，知识库/大模型节点选项为空的情况。 close #IC6OH4
- 修复：修复知识库上传文件集合名称不符合未报错，增加集合名称校验提示 close #IC6LKZ
- 修复：通过升级 Tinyflow 以修复 refType 不正确以及 Select 不能选择父级下拉项的问题
- 文档：文档站点，添加点击图片放到的功能
- 文档：循环节点和插件节点的文档。
- 文档：添加大模型文档，工作流大模型节点文档。


## v1.0.1 2025-05-08
- 新增：导入导出工作流. close #IC59WP
- 新增：用户拿到机器人(外部访问地址), 登录后返回机器人聊天页面 close #IC4MU6
- 新增：机器人增加自定义欢迎语 close #IC560Y
- 优化：优化博查搜索实现
- 优化：加入大模型按钮增加llmModel、brand参数。改善体验
- 优化：升级 Tinyflow 到最新版本
- 优化：优化 bots 的进入方式 close #IC568Q
- 优化：统一弹窗风格. close #IC4NQZ
- 优化：优化外部聊天地址页签和图标，欢迎语
- 优化：增加向量数据库配置说明
- 优化：优化 TinyFlowConfigService 的初始化方法及其位置
- 优化：外部访问 bot 增加页签图标显示和 bot 名称
- 优化：优化 bots 卡片高度，描述内容超出使用 tip 友好提示 close #IC5PKP
- 优化：统一 RAG 检索的相识度获取
- 优化：机器人聊天解除工作流注释 close #IC5J3C
- 修复：通过升级 Agents-Flex 和 Tinyflow 已修复 issues close #IC64VB close #IC60BS close #IC5W27 close #IC5451
- 修复：修复工作流和大模型配置调用显示超时问题 close #IC30BW
- 修复：修复知识库使用 milvus 向量模型为空问题 和 milvus 配置问题 close #IC00HI
- 修复：修复 okhttp 相关依赖版本冲突的问题
- 修复：工作流试运行时先保存 
- 修复：搜索引擎节点添加博查搜索
- 修复：提取设置tinyflow的公共方法
- 修复：修复知识库 redis 作为向量库时返回 Score 结果错误
- 修复：本地模型默认请求地址
- 文档：更新 openSearch 配置说明
- 文档：更新 elasticsearch 配置说明
- 文档：更新插件开发文档
- 文档：工作流自定义节点文档
- 文档：文件内容提取，文件生成节点的文档。
- 文档：新增搜索引擎节点文档.
- 文档：新增内容模板节点文档


## v1.0.0 2025-04-30
完善 Bot 应用、Bot 插件、RAG 知识库、AI 工作流、用户管理、部门管理、角色管理、菜单管理等基础功能