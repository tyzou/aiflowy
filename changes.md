# AIFlowy 更新记录

## v1.0.5 2025-06-04
- 新增：插件新增 试运行 功能
- 新增：工作流增加自定义图标功能
- 新增：iframe 匿名访问功能，会话消息记录通过 redis 进行缓存
- 新增：bot 设计页面新增插件、工作流、知识库未绑定时折叠面板展开的文字提示
- 新增：修复 node 的状态在执行时未自动变化的问题
- 新增：为 ChainStartEvent 和 ChainResumeEvent 添加获取初始化参数的功能
- 新增：优化 JsExecNode 在每次执行脚本时新建一个独立 Context
- 优化：升级 AF 到最新版本，以修复在 Code 节点中，无法通过 . 读取 map 内容的问题
- 优化：优化登录页面
- 优化：优化 UI 细节
- 优化：优化 Event 的 toString
- 修复：修复使用 qwen-plus 调用 function_call 没有正确拼接大模型返回的参数问题
- 修复：修复S3存储，知识库上传文件后报错 close #ICAUI2
- 修复：修复 deepSeek-chat 大模型调用 function_call 提交参数类型前缀必须小写问题
- 修复：修复 deepSeekchat 大模型调用 function_call 类转换失败问题 close #ICBGBX
- 修复：修复使用 qwen-plus 调用function_call 没有正确拼接大模型返回的参数问题
- 修复：function call 消息存入数据库
- 修复：bot 设计页面，插件、工作流、知识库弹窗支持分页
- 修复：外部链接匿名访问bot，会话增删改查，外部聊天记录清除
- 修复：升级 agents-flex ，解决 milvus 向量化维度不一致问题
- 修复：修复 es 知识库无法检索问题
- 修复：更新 TinyFlow 并修复 close #ICBOOD
- 修复：修复插件使用 apiKey 进行认证，headers 中的参数未正确添加到请求头问题， 修复修改插件未 提交 tokenValue 问题
- 修复：修复 js 中无法通过 "." 调用 map 数据的问题
- 修复：解决外部打开聊天时，bot预设的问题、欢迎语失效的问题 close #ICCHE6
- 修复：优化大模型调用报错时的提示信息

## v1.0.4 2025-05-28
- 新增：新增 sysToken 菜单插入语句
- 新增：Bot 应用增加问题预设功能，聊天组件支持快捷提示词
- 新增：iframe 匿名用户访问功能，新增 iframe 访问外部地址鉴权功能 close #IC7TT5
- 新增：iframe 鉴权接口，前端拼接 token 并存入 localStorage 进行鉴权
- 新增：新增插件分类功能，插件可归属一个或多个分类
- 新增：插件分类支持修改与删除
- 新增：新增单节点执行功能 close #IC7QJU
- 新增：工作流试运行时支持显示每一步执行结果 close #IC7KLQ
- 新增：知识库导入支持 PPT、PPTX 文件 close #IC6IOY
- 新增：新增 DeepSeek 品牌
- 新增：新增插件分类接口
- 新增：新增 SQL 查询节点功能 close #IC7ZET
- 优化：统一数据库表前缀
- 优化：优化 bot 使用大模型但不支持 function_calling 的报错提示 close #IC73F6
- 优化：Bot 下 API 功能增加使用说明地址
- 优化：优化节点单独运行时查找 dataType 的代码
- 优化：升级 AF（Agents-Flex）至最新版本，支持流式对话与 NodeErrorListener 配置
- 优化：优化知识库页面布局，右侧内容自动填满剩余宽度
- 优化：优化日志配置并启用 Spring Boot 日志 close #IC8BU9
- 修复：修复本地 ES 上传小文档超时报错后导入按钮失效的问题 close #ICA6WM
- 修复：修复可能的 NPE 问题
- 修复：修复 bot 对话共享上下文问题
- 修复：插件未将 key 加入参数中导致 API 鉴权失败 close #IC9SQH
- 修复：后台 AI 助手配置错误时聊天提示异常，修复 OpenAI 配置问题 close #IC9L0Q
- 修复：相似度检索测试结果不准确问题 close #IC9FQM
- 文档：新增 iframe 匿名用户访问文档
- 文档：更新自定义节点文档
- 文档：更新外部调用工作流文档
- 文档：新增默认存储方式配置说明
- 文档：更新文件管理文档
- 文档：新增定时任务文档
- 文档：更新默认用户名密码说明
- 文档：更新向量数据库文档
- 文档：更新大模型配置文档
- 文档：整理工作流文档图示
- 文档：新增 SQL 查询节点文档
- 文档：新增插件分类功能文档

## v1.0.3 2025-05-21
- 新增： 新增 quartz 定时任务。 close #IC7HPZ
- 新增： 用户滑动聊天窗口后，不再自动滚到底部
- 新增： 增加智能体调试对话预览上下文清除的功能 close #IC7SMS
- 新增： 插件输入参数和输出参数支持子节点
- 新增： AccordionItem 增加 icon 属性。
- 优化： 修复登录页面加载抖动, 优化登录页面
- 优化： 优化插件传参 argsMap值 < 参数默认值
- 优化： 优化插件代码,支持 path 参数 close #IC8L3I
- 优化： 升级 Tinyflow 和 Agents-flex 到最新版本
- 优化： 优化 pom 版本构建
- 修复： 修复 Bot 挂载插件，知识库，工作流之后等待时间过长问题，命中function call或者没有命中都使用 stream 返回，提高用户使用体验
- 修复： 修复工作流页面初始化会请求导入工作流接口的问题。
- 修复： 修复 apiKey 新增成功后列表没有自动刷新 close: #IC8C9I
- 修复： 修复可能的 NPE 问题
- 修复： 修复系统提示词未填空指针问题
- 修复： 修复插件为空sql报错问题
- 文档： apiKey文档
- 文档： 系统设置文档
- 文档： 角色管理、apiKey文档
- 文档： 动态代码节点文档。
- 文档： 本地模型文档
- 文档： 配置阿里云数据库文档
- 文档： bot挂载工作流文档
- 文档： 模型管理文档
- 文档： bot挂载知识库文档
- 文档： 工作流知识库节点、Http 节点文档，修复产品文档 next page 显示错误的问题。
- 文档： bot挂载插件文档
- 文档： 优化工作流部分文档图片内容。
- 文档： 优化文档代码格式
- 文档： 更新Bot产品文档
- 文档： 更新工作流文件生成节点文档。
- 文档： 更新工作流插件节点文档。
- 文档： 工作流节点上下文的文档。
- 文档： 更新知识库产品文档
- 文档： 工作流执行条件文档。
- 文档： 工作流快速开始文档。
- 文档： 完善插件模块的文档。


## v1.0.2 2025-05-15
- 新增：知识库增加excel文件导入 close #IC6IY6
- 新增：工作流独立访问页面 close #IC63FS
- 新增：工作流可通过API接口调用 close #IC3FNT
- 新增：升级 Tinyflow、Agents-Flex 等到最新版本
- 新增：工作流新增插件节点 close #IC5XEM close #IC3FO4
- 优化：统一【Bot】 和 【workflow】 的插件选择弹出框 close #212911
- 优化：知识库上传文件成功后就不能再选向量模型进行配置
- 优化：导出工作流改为从后端取数据
- 优化：当系统提示词没设置时，设置一个默认的系统提示词
- 优化：插件工具名称增加校验,知识库增加自定义向量模型进行向量化 close #IC6WAY
- 优化：知识库成功存入向量数据之后不允许再修改向量模型
- 修复：修复机器人删除对话记录后报botid不能为空 close #IC78K1
- 修复：解决执行加入大模型按钮后不会变成已加入大模型
- 修复：修复OpenAi的llmExtraConfig空指针问题 close #IC72VG
- 修复：修复新建空白工作流时，知识库/大模型节点选项为空的情况。 close #IC6OH4
- 修复：修复知识库上传文件集合名称不符合未报错，增加集合名称校验提示 close #IC6LKZ
- 修复：通过升级 Tinyflow 以修复 refType 不正确以及 Select 不能选择父级下拉项的问题
- 文档：文档站点，添加点击图片放到的功能
- 文档：循环节点和插件节点的文档。
- 文档：添加大模型文档，工作流大模型节点文档。


## v1.0.1 2025-05-08
- 新增：导入导出工作流. close #IC59WP
- 新增：用户拿到机器人(外部访问地址), 登录后返回机器人聊天页面 close #IC4MU6
- 新增：机器人增加自定义欢迎语 close #IC560Y
- 优化：优化博查搜索实现
- 优化：加入大模型按钮增加llmModel、brand参数。改善体验
- 优化：升级 Tinyflow 到最新版本
- 优化：优化 bots 的进入方式 close #IC568Q
- 优化：统一弹窗风格. close #IC4NQZ
- 优化：优化外部聊天地址页签和图标，欢迎语
- 优化：增加向量数据库配置说明
- 优化：优化 TinyFlowConfigService 的初始化方法及其位置
- 优化：外部访问 bot 增加页签图标显示和 bot 名称
- 优化：优化 bots 卡片高度，描述内容超出使用 tip 友好提示 close #IC5PKP
- 优化：统一 RAG 检索的相识度获取
- 优化：机器人聊天解除工作流注释 close #IC5J3C
- 修复：通过升级 Agents-Flex 和 Tinyflow 已修复 issues close #IC64VB close #IC60BS close #IC5W27 close #IC5451
- 修复：修复工作流和大模型配置调用显示超时问题 close #IC30BW
- 修复：修复知识库使用 milvus 向量模型为空问题 和 milvus 配置问题 close #IC00HI
- 修复：修复 okhttp 相关依赖版本冲突的问题
- 修复：工作流试运行时先保存 
- 修复：搜索引擎节点添加博查搜索
- 修复：提取设置tinyflow的公共方法
- 修复：修复知识库 redis 作为向量库时返回 Score 结果错误
- 修复：本地模型默认请求地址
- 文档：更新 openSearch 配置说明
- 文档：更新 elasticsearch 配置说明
- 文档：更新插件开发文档
- 文档：工作流自定义节点文档
- 文档：文件内容提取，文件生成节点的文档。
- 文档：新增搜索引擎节点文档.
- 文档：新增内容模板节点文档


## v1.0.0 2025-04-30
完善 Bot 应用、Bot 插件、RAG 知识库、AI 工作流、用户管理、部门管理、角色管理、菜单管理等基础功能